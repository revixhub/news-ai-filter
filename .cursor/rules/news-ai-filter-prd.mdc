---
description: 
globs: 
alwaysApply: true
---
# PRD: Система автоматизированного дайджеста новостей по стратегическому маркетингу

## 1. Обзор продукта

### 1.1 Описание
Автоматизированная система сбора, анализа и доставки персонализированного дайджеста новостей из множественных источников (Telegram каналы, веб-сайты, YouTube) с использованием AI для определения важности и формирования выводов.

### 1.2 Целевая аудитория
- Первичная: Личное использование владельцем продукта
- Вторичная: Возможное масштабирование на других специалистов по стратегическому маркетингу

### 1.3 Основная ценность
Экономия 2-3 часов ежедневно на мониторинге 100-200 источников информации с получением только самой важной информации в удобном формате.

## 2. Функциональные требования

### 2.1 Сбор данных

#### 2.1.1 Источники
- **Telegram каналы** (приоритет 1)
- **Веб-сайты** (приоритет 2)
- **YouTube каналы** (приоритет 3)

#### 2.1.2 Тематика
- Стратегический маркетинг (фокус РФ + СНГ)
- Тренды потребления
- Новые каналы продвижения
- Кейсы крупных брендов
- Исследования рынка
- Маркетинговые технологии

#### 2.1.3 Начальный список источников
- 30 топовых источников для MVP
- Конфигурация через файл/код
- Возможность добавления новых источников

### 2.2 Обработка контента

#### 2.2.1 Парсинг
- Telegram: через Telegram API
- Веб-сайты: парсинг HTML/RSS
- YouTube: передача в MCP сервер пользователя для обработки

#### 2.2.2 AI-анализ
- Определение важности по критериям:
  - Применимость в работе
  - Потенциал изменить индустрию
  - Масштаб охвата
  - Новизна подхода
- Категоризация новостей
- Формирование кратких выжимок
- Генерация выводов и рекомендаций

#### 2.2.3 Фильтрация
- Исключение технической "дрочки"
- Сохранение платного/рекламного контента с пометкой
- Дедупликация похожих новостей

### 2.3 Формирование дайджеста

#### 2.3.1 Структура
1. **Топ-5 главных инсайтов** (с выводами AI)
2. **Категоризированный список** остальных новостей
3. **Общие выводы дня** (тренды, на что обратить внимание)

#### 2.3.2 Ограничения
- Объем: до 2 страниц A4 (для Telegram)
- Время чтения: до 5 минут
- Количество ключевых инсайтов: до 5

#### 2.3.3 Форматирование
- Использование эмодзи для визуального разделения
- Ссылки оформлены как "Читать источник"
- Четкая структура с заголовками

### 2.4 Доставка

#### 2.4.1 Канал доставки
- Telegram бот (основной и единственный канал)

#### 2.4.2 Расписание
- Автоматическая отправка: 10:00 ежедневно
- Ручной запрос: команда `/digest` для немедленного формирования

#### 2.4.3 Команды бота
- `/start` - активация подписки
- `/digest` - сформировать дайджест сейчас
- `/sources` - показать список источников
- `/help` - справка по командам

### 2.5 Хранение данных

#### 2.5.1 История
- Сохранение дайджестов в локальной папке
- Формат: markdown файлы с датой
- Срок хранения: без ограничений

#### 2.5.2 База данных
- Локальная SQLite база
- Хранение обработанных новостей 7 дней
- Индексация по источникам и датам

## 3. Технические требования

### 3.1 Архитектура

#### 3.1.1 Компоненты
1. **Collector Service** - сбор данных из источников
2. **Parser Service** - обработка и структурирование
3. **AI Analyzer** - анализ важности и генерация выводов
4. **Digest Generator** - формирование финального дайджеста
5. **Telegram Bot** - интерфейс доставки
6. **Scheduler** - управление расписанием

#### 3.1.2 Технологический стек
- **Язык**: Python 3.10+
- **Фреймворк для бота**: python-telegram-bot
- **Планировщик**: APScheduler
- **База данных**: SQLite
- **AI/LLM**: OpenAI API (GPT-4) или Claude API
- **Парсинг**: BeautifulSoup, Scrapy
- **YouTube**: интеграция с MCP сервером пользователя

### 3.2 Интеграции

#### 3.2.1 Внешние API
- Telegram Bot API
- OpenAI/Claude API для анализа
- RSS feeds для сайтов
- MCP сервер для YouTube

#### 3.2.2 Форматы данных
- JSON для внутреннего обмена
- Markdown для хранения дайджестов
- HTML parsing для веб-сайтов

### 3.3 Производительность

#### 3.3.1 Требования
- Обработка 200+ источников за 30 минут
- Генерация дайджеста за 2-3 минуты
- Работа на локальном компьютере

#### 3.3.2 Оптимизация
- Параллельный сбор данных
- Кеширование обработанных новостей
- Батч-обработка для AI API

### 3.4 Безопасность
- Локальное хранение API ключей
- Шифрование конфиденциальных данных
- Ограничение доступа к боту по user_id

## 4. Пользовательские сценарии

### 4.1 Основной сценарий
1. Система автоматически собирает данные в 9:30
2. AI анализирует и ранжирует контент
3. В 10:00 пользователь получает дайджест
4. Пользователь читает 5 минут и в курсе всех важных новостей

### 4.2 Дополнительные сценарии
- Ручной запрос дайджеста в любое время
- Просмотр списка активных источников
- Получение дайджеста после пропущенного дня

## 5. MVP функциональность

### 5.1 Фаза 1 (2 недели)
- ✅ Сбор из Telegram каналов
- ✅ Базовый AI анализ важности
- ✅ Простой текстовый дайджест
- ✅ Отправка по расписанию

### 5.2 Фаза 2 (2 недели)
- ➕ Добавление веб-сайтов
- ➕ Улучшенная категоризация
- ➕ Команды управления ботом
- ➕ Сохранение истории

### 5.3 Фаза 3 (2 недели)
- ➕ Интеграция YouTube через MCP
- ➕ Продвинутый AI анализ с выводами
- ➕ Визуальное форматирование
- ➕ Оптимизация производительности

## 6. Метрики успеха

### 6.1 Количественные
- Время чтения дайджеста: < 5 минут
- Покрытие источников: 95%+ ежедневно
- Точность определения важности: 80%+

### 6.2 Качественные
- Отсутствие пропущенных важных новостей
- Релевантность AI выводов
- Удобство формата подачи

## 7. Риски и ограничения

### 7.1 Технические риски
- Изменение API источников
- Лимиты AI API
- Блокировки при парсинге

### 7.2 Митигация
- Модульная архитектура для легкой замены компонентов
- Резервные методы сбора данных
- Мониторинг и алерты об ошибках

## 8. Будущие улучшения

### 8.1 Краткосрочные (1-3 месяца)
- Обучение на обратной связи пользователя
- Недельные/месячные аналитические отчеты
- Расширение списка источников

### 8.2 Долгосрочные (6+ месяцев)
- Мультипользовательская версия
- Мобильное приложение
- Интеграция с рабочими инструментами
- Предиктивная аналитика трендов

## 9. Бюджет и ресурсы

### 9.1 Стоимость инфраструктуры (в месяц)
- AI API: $30-50
- Сервер (пока локальный): $0
- Домен/хостинг: $0
- **Итого**: $30-50/месяц

### 9.2 Временные затраты
- Разработка MVP: 6 недель
- Поддержка: 2-3 часа/неделю
- Обновление источников: 1 час/месяц

## 10. Критерии готовности

### 10.1 Definition of Done для MVP
- [ ] Собирает данные из 30 источников
- [ ] Генерирует дайджест с топ-5 инсайтами
- [ ] Отправляет в 10:00 ежедневно
- [ ] Работает стабильно 7 дней без сбоев
- [ ] Время чтения дайджеста < 5 минут

### 10.2 Критерии успешного запуска
- Пользователь не пропускает важные новости
- Экономия времени 2+ часа в день

- Качество AI-выводов оценивается как полезное