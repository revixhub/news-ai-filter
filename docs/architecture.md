# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Marketing Digest Bot

## üèó –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è —Å—Ö–µ–º–∞
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    –ò—Å—Ç–æ—á–Ω–∏–∫–∏    ‚îÇ     ‚îÇ    –ò—Å—Ç–æ—á–Ω–∏–∫–∏    ‚îÇ     ‚îÇ    –ò—Å—Ç–æ—á–Ω–∏–∫–∏    ‚îÇ
‚îÇ    Telegram     ‚îÇ     ‚îÇ    Websites     ‚îÇ     ‚îÇ    YouTube      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ                       ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                 ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ    Collector Service    ‚îÇ
                    ‚îÇ  (–°–µ—Ä–≤–∏—Å —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö)  ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                 ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ     Parser Service      ‚îÇ
                    ‚îÇ (–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –æ—á–∏—Å—Ç–∫–∞)   ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                 ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ      AI Analyzer        ‚îÇ
                    ‚îÇ  (OpenAI/Claude API)    ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                 ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ   Digest Generator      ‚îÇ
                    ‚îÇ (–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–¥–∫–∏)   ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                 ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ    Telegram Bot API     ‚îÇ
                    ‚îÇ      (–î–æ—Å—Ç–∞–≤–∫–∞)         ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                 ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ      –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å       ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üì¶ –ú–æ–¥—É–ª–∏ —Å–∏—Å—Ç–µ–º—ã

### 1. Collector Service (src/collectors/)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
- `telegram_collector.py` - —Å–±–æ—Ä –∏–∑ Telegram –∫–∞–Ω–∞–ª–æ–≤
- `web_collector.py` - –ø–∞—Ä—Å–∏–Ω–≥ –≤–µ–±-—Å–∞–π—Ç–æ–≤ –∏ RSS
- `youtube_collector.py` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MCP —Å–µ—Ä–≤–µ—Ä–æ–º
- `base_collector.py` - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã**:
```python
class BaseCollector:
    async def collect(self) -> List[RawContent]
    async def check_source_availability(self) -> bool
    def get_last_update_time(self) -> datetime
```

### 2. Parser Service (src/parsers/)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—ã—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
- `content_parser.py` - –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ä—Å–µ—Ä
- `deduplicator.py` - —É–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- `content_filter.py` - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `normalizer.py` - –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö**:
```python
@dataclass
class ParsedContent:
    id: str
    source: str
    title: str
    content: str
    url: str
    published_at: datetime
    category: Optional[str]
    is_ad: bool
```

### 3. AI Analyzer (src/analyzers/)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–Ω–∞–ª–∏–∑ –≤–∞–∂–Ω–æ—Å—Ç–∏ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—ã–≤–æ–¥–æ–≤

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
- `importance_scorer.py` - –æ—Ü–µ–Ω–∫–∞ –≤–∞–∂–Ω–æ—Å—Ç–∏ (0-100)
- `categorizer.py` - –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `insights_generator.py` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Å–∞–π—Ç–æ–≤
- `llm_client.py` - –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å LLM API

**–ü—Ä–æ–º–ø—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞**:
```python
IMPORTANCE_PROMPT = """
–û—Ü–µ–Ω–∏ –≤–∞–∂–Ω–æ—Å—Ç—å –Ω–æ–≤–æ—Å—Ç–∏ –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –ø–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–º—É –º–∞—Ä–∫–µ—Ç–∏–Ω–≥—É (–†–§/–°–ù–ì).
–ö—Ä–∏—Ç–µ—Ä–∏–∏:
1. –ü—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç—å –≤ —Ä–∞–±–æ—Ç–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å
2. –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª –∏–∑–º–µ–Ω–∏—Ç—å –∏–Ω–¥—É—Å—Ç—Ä–∏—é
3. –ú–∞—Å—à—Ç–∞–± –æ—Ö–≤–∞—Ç–∞ (–±—é–¥–∂–µ—Ç—ã, –∞—É–¥–∏—Ç–æ—Ä–∏—è)
4. –ù–æ–≤–∏–∑–Ω–∞ –ø–æ–¥—Ö–æ–¥–∞/–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞

–û—Ü–µ–Ω–∫–∞ –æ—Ç 0 –¥–æ 100.
"""
```

### 4. Digest Generator (src/digest/)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –¥–∞–π–¥–∂–µ—Å—Ç–∞

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
- `digest_builder.py` - —Å–±–æ—Ä–∫–∞ –¥–∞–π–¥–∂–µ—Å—Ç–∞
- `formatter.py` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è Telegram
- `template_engine.py` - —à–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–π–¥–∂–µ—Å—Ç–∞**:
```
üî• –¢–æ–ø-5 –∏–Ω—Å–∞–π—Ç–æ–≤ –¥–Ω—è

1. [–ó–∞–≥–æ–ª–æ–≤–æ–∫]
   üìù [–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ]
   üí° [–í—ã–≤–æ–¥ AI]
   üîó [–ß–∏—Ç–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫]

üìä –û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏
[–ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫]

üéØ –í—ã–≤–æ–¥—ã –¥–Ω—è
[–û–±—â–∏–µ —Ç—Ä–µ–Ω–¥—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏]
```

### 5. Bot Service (src/bot/)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —á–µ—Ä–µ–∑ Telegram

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
- `bot.py` - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –±–æ—Ç–∞
- `handlers.py` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
- `scheduler.py` - –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á
- `user_manager.py` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

### 6. Database Layer (src/database/)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –•—Ä–∞–Ω–µ–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏

**–°—Ö–µ–º–∞ –ë–î (SQLite)**:
```sql
-- –ò—Å—Ç–æ—á–Ω–∏–∫–∏
CREATE TABLE sources (
    id INTEGER PRIMARY KEY,
    type TEXT NOT NULL,
    name TEXT NOT NULL,
    url TEXT,
    is_active BOOLEAN DEFAULT 1,
    created_at TIMESTAMP
);

-- –ö–æ–Ω—Ç–µ–Ω—Ç
CREATE TABLE content (
    id INTEGER PRIMARY KEY,
    source_id INTEGER,
    title TEXT,
    content TEXT,
    url TEXT,
    importance_score INTEGER,
    category TEXT,
    published_at TIMESTAMP,
    processed_at TIMESTAMP,
    FOREIGN KEY (source_id) REFERENCES sources(id)
);

-- –î–∞–π–¥–∂–µ—Å—Ç—ã
CREATE TABLE digests (
    id INTEGER PRIMARY KEY,
    user_id INTEGER,
    content TEXT,
    created_at TIMESTAMP
);

-- –ú–µ—Ç—Ä–∏–∫–∏
CREATE TABLE metrics (
    id INTEGER PRIMARY KEY,
    digest_id INTEGER,
    processing_time REAL,
    sources_count INTEGER,
    items_count INTEGER,
    FOREIGN KEY (digest_id) REFERENCES digests(id)
);
```

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å (9:30 - 10:00)
1. **9:30** - Scheduler –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∞
2. **9:30-9:50** - Collectors —Å–æ–±–∏—Ä–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
3. **9:50-9:55** - Parser –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏ –¥–µ–¥—É–ø–ª–∏—Ü–∏—Ä—É–µ—Ç
4. **9:55-9:58** - AI Analyzer –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä—É–µ—Ç
5. **9:58-9:59** - Digest Generator —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å–≤–æ–¥–∫—É
6. **10:00** - Bot –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–π–¥–∂–µ—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

### –†—É—á–Ω–æ–π –∑–∞–ø—Ä–æ—Å (/digest)
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞ (–µ—Å–ª–∏ < 30 –º–∏–Ω—É—Ç —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ)
2. –ï—Å–ª–∏ –∫–µ—à —É—Å—Ç–∞—Ä–µ–ª - –∑–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
3. –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

## üõ° –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
```python
class ErrorHandler:
    - Retry –º–µ—Ö–∞–Ω–∏–∑–º (3 –ø–æ–ø—ã—Ç–∫–∏ —Å exponential backoff)
    - Fallback –Ω–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
    - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞ –æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–±–æ—è—Ö
```

### –ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
- API –∫–ª—é—á–∏ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –ø–æ user_id
- –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—É–±–ª–∏—á–Ω—ã—Ö endpoints

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–æ–≤
- **DEBUG**: –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞–±–æ—Ç–µ
- **INFO**: –ö–ª—é—á–µ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è (—Å—Ç–∞—Ä—Ç/—Å—Ç–æ–ø, –æ—Ç–ø—Ä–∞–≤–∫–∞)
- **WARNING**: –ù–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- **ERROR**: –û—à–∏–±–∫–∏, —Ç—Ä–µ–±—É—é—â–∏–µ –≤–Ω–∏–º–∞–Ω–∏—è

### –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–∞–∂–¥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API –∫–≤–æ—Ç
- –†–∞–∑–º–µ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)
```bash
# API Keys
TELEGRAM_BOT_TOKEN=xxx
OPENAI_API_KEY=xxx

# Settings
DIGEST_TIME=10:00
TIMEZONE=Europe/Moscow
MAX_CONTENT_AGE_DAYS=1

# Limits
MAX_SOURCES_PER_TYPE=50
MAX_CONTENT_LENGTH=4000
AI_TIMEOUT_SECONDS=30
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (sources.json)
```json
{
  "telegram": {
    "channels": ["@channel1", "@channel2"],
    "check_interval": 300
  },
  "websites": {
    "urls": ["https://site.com/rss"],
    "check_interval": 600
  },
  "youtube": {
    "channels": ["UC_xxx"],
    "mcp_server_url": "http://localhost:8080"
  }
}
```

## üöÄ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –û–¥–Ω–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞
- –õ–æ–∫–∞–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

### –ü–ª–∞–Ω –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
1. **–§–∞–∑–∞ 1**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
2. **–§–∞–∑–∞ 2**: Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
3. **–§–∞–∑–∞ 3**: Celery –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
4. **–§–∞–∑–∞ 4**: PostgreSQL –≤–º–µ—Å—Ç–æ SQLite
5. **–§–∞–∑–∞ 5**: –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### YouTube MCP Server
```python
class YouTubeMCPClient:
    async def process_video(video_id: str) -> VideoSummary:
        response = await mcp_request("/process", {
            "video_id": video_id,
            "summary_length": "short"
        })
        return VideoSummary.from_dict(response)
```

### LLM API –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è
```python
class LLMProvider(ABC):
    @abstractmethod
    async def analyze(prompt: str, content: str) -> AnalysisResult
    
class OpenAIProvider(LLMProvider):
    # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è OpenAI
    
class ClaudeProvider(LLMProvider):
    # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è Claude
```

## üìù –°–æ–≥–ª–∞—à–µ–Ω–∏—è –ø–æ –∫–æ–¥—É

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π
- –û–¥–∏–Ω –∫–ª–∞—Å—Å = –æ–¥–∏–Ω —Ñ–∞–π–ª
- Dependency Injection –¥–ª—è —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏
- Type hints –≤–µ–∑–¥–µ
- Docstrings –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å
- asyncio –¥–ª—è I/O –æ–ø–µ—Ä–∞—Ü–∏–π
- aiohttp –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- aiogram –¥–ª—è Telegram Bot API
- asyncpg –¥–ª—è –ë–î (–≤ –±—É–¥—É—â–µ–º)